npx create-next-app@latest ai-interview-platform `
  --ts `
  --tailwind `
  --eslint `
  --app `
  --src-dir `
  --import-alias "@/*"


cd ai-interview-platform


npm i -D prisma@^6 tsx
npm i @prisma/client@^6 zod


DATABASE_URL="mysql://root:1234@localhost:3306/ai_interview"


npx prisma init


// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}


npx prisma migrate dev --name init


Hardcoded db seed: npx tsx prisma/seed.ts

Create Prisma singleton in src/lib/prisma.ts

Create cookie check middleware src/proxy.ts (new name->proxy.ts   old name->middleware.ts functionality is same, diff is just the naming)

(creates user + interview session) src/app/api/session/start/route.ts

Update src/app/page.tsx with actual POST method

Create src/app/session/[id]/page.tsx to get redirected to this page after start session

Create src/app/api/session/[id]/question/route.ts - GET API route to get 1 question for a session (this will be tiggered by src/app/session/[id]/page.tsx page)

Create src/app/api/session/[id]/attempt/route.ts - POST API route to sumbit attempted answer (this will be tiggered by src/app/session/[id]/page.tsx page "Attempt Button")

Update src/app/session/[id]/page.tsx page to handle interaction with get question route and attempt answer route


npm i @upstash/redis

Create redis client in src/lib/redis.ts

Quota helper (3/day) using redis sin rc/lib/quota.ts

Update file: src/app/api/session/start/route.ts  + Quota check


npm i @google/genai 
npm i zod-to-json-schema 

Create sha256 hashing util in src/lib/hash.ts

npm install zod@3   ->Downgraded to zod@3 since there is safe problem with zodToJsonSchema(EvaluationSchema) coversion

Create Gemini to evaluate question+answer in src/lib/gemini.ts

To Set or Retrieve gemini Evaluated Answer stored in Redis Cache with hashed key in src/lib/evalCache.ts

Update Session Page to load the evaluation result in src\app\session\[id]\page.tsx 


Create End session API in src/app/api/session/[id]/end/route.ts

Create History Page

Create Analytic Page 


Create tiny sleep helper(global setTimout) to prevent Submit spam src/lib/sleep.ts

Redis lock helper to identify and lock submit req if current req lockkey name was already requested for submit button src/lib/redisLock.ts

Update questions route for “No repeats” question picking (within a session): src/app/api/session/[id]/question/route.ts

Update src/app/api/session/[id]/attempt/route.ts  - Add lock + retry to Attempt submission route

Update session/[id]/page.tsx to load next question manually and updated Question route to return Current Question no. and Total Questions

//DEPLOYMENT USING AWS SST:

Create a User in IAM AWS username: ai-interview-platform-sst-deploy and "Attach policies directly" with AdministratorAccess box checked

Clicked on username: ai-interview-platform-sst-deploy and on "Security credentials" tab, Click "Create access key",Select "Command Line Interface (CLI)", Click Next → Create access key and secret access key

Installed “AWS CLI v2” from AWS (Windows installer)

Check Powershell: aws --version

Connect to created SST using powershell:  
aws configure
```
It will prompt you for:
```
AWS Access Key ID:     → paste your Access Key ID
AWS Secret Access Key: → paste your Secret Access Key
Default region name:   → e.g. us-east-1
Default output format: → just press Enter (json is fine)

This saves my credentials to ~/.aws/credentials so SST and the AWS CLI can use them automatically.

Verify it works: aws sts get-caller-identity

On Project folder, install SST using these commands: npx sst@latest init
                                                     npm install

Find the "sst.config.ts" file in your project root. It was just created by SST. And update the config file to instruct SST about our app

Then Deploy to AWS using this command: npx sst deploy --stage production

Open tsconfig.json and find the "compilerOptions" then change to "strict": false

Downgrade react: npm install react@18.3.1 react-dom@18.3.1 @types/react@18 @types/react-dom@18
Downgrade nextJS: npm install next@15.1.0 eslint-config-next@15.1.0

rename: proxy.ts -> middleware.ts
delete {crypto} and directly write crypto.randomUUID();

Remove-Item -Recurse -Force node_modules
Remove-Item -Recurse -Force .next
Remove-Item -Recurse -Force .open-next
npm install
npx prisma generate
npx sst deploy --stage production

I made the above changes due to SST version mismatch problem

And another problem arises because mysql is localhost and doesn't work on AWS Lambda

So create TiDB starter account
Create Cluster with Connect type: Prisma
Copy the generated TiDB DATABASE connection URL and edit <PASSWORD> with generated TiDB key
Update DATABASE_URL in .env

Run "npx prisma db push" to push local Schema to TiDB 

Edit package.json to define prisma question seed script:
"prisma": {
    "seed": "tsx prisma/seed.ts"
  },

Run "npx prisma db seed" to seed questions to TiDB online DB

Create a safe JSON parser helper in src/lib/safeJson.ts

Replaced .json() with safeJson() to handle plain texts error during production which .json() response can't read : src\app\session\[id]\page.tsx , src\app\api\sessiom\start\route.ts AND src\app\page.tsx 

Added BinaryTargets in schema.prisma for both Windows Machine("native") and AWS Lambda Machine("rhel-openssl-3.0.x")

npx prisma generate
npx sst deploy --stage production





